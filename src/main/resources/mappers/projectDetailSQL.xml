<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="data.project.DetailMapper">
	<select id="getData" parameterType="int" resultType="pdto">
		select * from project where idx=#{idx}
	</select>
	<select id="getPaymentDate" parameterType="int" resultType="String">
		select date_add(end_date,INTERVAL 1 DAY) from project where idx=#{idx}
	</select>
	<select id="getAddr" parameterType="String" resultType="ddto">
		select ifnull(max(addr2),' ')as addr, ifnull(max(addr),' ') as addr2 from delivery where id=#{id} and pin=1;
	</select>
	<update id="setHp" parameterType="mdto">
		update member set hp=#{hp} where id=#{id}
	</update>
	<update id="setEmail" parameterType="mdto">
		update member set email=#{email} where id=#{id}
	</update>
	<insert id="insertDelivery" parameterType="ddto">
		insert into delivery(name, id, addr, addr2, hp, pin)
		values (#{name}, #{id}, #{addr}, #{addr2}, #{hp}, 1)
	</insert>
</mapper>